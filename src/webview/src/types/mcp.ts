/**
 * MCP (Model Context Protocol) 前端类型定义
 *
 * 支持两种配置来源：
 * 1. cc-switch 格式: ~/.cc-switch/config.json (主要)
 * 2. Claude 原生格式: ~/.claude.json (兼容)
 */

/**
 * MCP 服务器连接规格
 * 支持三种连接方式: stdio, http, sse
 */
export interface McpServerSpec {
  /** 连接类型，默认为 stdio */
  type?: 'stdio' | 'http' | 'sse';

  // stdio 类型字段
  /** 执行命令 (stdio 类型必需) */
  command?: string;
  /** 命令参数 */
  args?: string[];
  /** 环境变量 */
  env?: Record<string, string>;
  /** 工作目录 */
  cwd?: string;

  // http/sse 类型字段
  /** 服务器 URL (http/sse 类型必需) */
  url?: string;
  /** 请求头 */
  headers?: Record<string, string>;

  /** 允许扩展字段 */
  [key: string]: any;
}

/**
 * MCP 应用启用状态 (cc-switch v3.7.0 格式)
 * 标记服务器应用到哪些客户端
 */
export interface McpApps {
  claude: boolean;
  codex: boolean;
  gemini: boolean;
}

/**
 * MCP 服务器完整配置
 */
export interface McpServer {
  /** 唯一标识符 (配置文件中的 key) */
  id: string;
  /** 显示名称 */
  name?: string;
  /** 服务器连接规格 */
  server: McpServerSpec;
  /** 应用启用状态 (cc-switch 格式) */
  apps?: McpApps;
  /** 描述 */
  description?: string;
  /** 标签 */
  tags?: string[];
  /** 主页链接 */
  homepage?: string;
  /** 文档链接 */
  docs?: string;
  /** 是否启用 (旧格式兼容) */
  enabled?: boolean;
  /** 允许扩展字段 */
  [key: string]: any;
}

/**
 * MCP 服务器映射 (id -> McpServer)
 */
export type McpServersMap = Record<string, McpServer>;

/**
 * MCP 预设配置
 */
export interface McpPreset {
  id: string;
  name: string;
  description?: string;
  tags?: string[];
  server: McpServerSpec;
  homepage?: string;
  docs?: string;
}
